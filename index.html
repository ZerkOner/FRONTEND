<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Qui est là ? - Pointage</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-capable" content="yes" />
  <link rel="stylesheet" href="index.css" />
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#2c3e50" />
  <link rel="apple-touch-icon" href="icons/android-chrome-192x192.png" />
  <script>
    function imprimerConfirmation() {
      window.print();
    }
  </script>
</head>
<body>

<h1>Bienvenue en Enfer</h1>

<div class="tabs">
  <div class="tab active" data-tab="entree">Entrée</div>
  <div class="tab" data-tab="sortie">Sortie</div>
</div>

<div id="entree" class="tab-content active">
  <h2>Pointage Entrée</h2>
  <form id="form-entree">
    <label>Nom <sup>*</sup></label>
    <input type="text" name="nom" required />

    <label>Prénom <sup>*</sup></label>
    <input type="text" name="prenom" required />

    <label>Email <sup>*</sup></label>
    <input type="email" name="email" required />

    <label>Objet de la visite <sup>*</sup></label>
    <select name="objet" id="objet" required>
      <option value="">-- Choisir --</option>
      <option value="personnel">Membre du personnel</option>
      <option value="formation">Formation</option>
    </select>

    <div id="personnel-container" class="sub-container" style="display:none;">
      <label>Personne à rencontrer</label>
      <select name="personnel_id" id="personnel-select">
        <option value="">-- Aucun --</option>
      </select>
    </div>

    <div id="formation-container" class="sub-container" style="display:none;">
      <label>Formation</label>
      <select name="formation_id" id="formation-select">
        <option value="">-- Aucune --</option>
      </select>
    </div>

    <button type="submit">Valider l'entrée</button>
  </form>
  <div id="entree-message"></div>
</div>

<div id="sortie" class="tab-content">
  <h2>Pointage Sortie</h2>
  <form id="form-sortie">
    <label>Identifiant unique (QR code ID)</label>
    <input type="text" name="qr_code_id" />

    <label>Ou Email</label>
    <input type="email" name="email" />

    <button type="submit">Valider la sortie</button>
  </form>
  <div id="sortie-message"></div>
</div>

<div id="confirmation" class="printable" style="display:none;">
  <h2>Bienvenue, <span id="conf-nom"></span> <span id="conf-prenom"></span> !</h2>
  <p>Votre entrée a été enregistrée à <span id="conf-horodatage"></span>.</p>
  <p id="conf-objet"></p>
  <p>Voici votre identifiant unique : <strong id="conf-qr"></strong></p>
  <button class="no-print" onclick="imprimerConfirmation()">Imprimer</button>
</div>

<script src="tabs.js"></script>
<script src="main.js"></script>
</body>
</html>
